{% extends "base.html" %}

{% block content %}
<h1>Latest Trade Decisions</h1>
{% include "partials/_config_banner.html" %}

<table>
  <thead>
    <tr>
      <th>Ticker</th>
      <th>Action</th>
      <th>Shares</th>
      <th>Amount (USD)</th>
      <th>Reason</th>
      <th>Timestamp</th>
    </tr>
  </thead>
  <tbody>
    {% for trade in trades %}
      {% for decision in trade.data %}
      <tr>
        <td>{{ decision.get('ticker', 'N/A') }}</td>
        <td>{{ decision.get('action', 'N/A') }}</td>
        <td>
          {% if decision.get('shares') %}
            {{ '%.2f'|format(decision.get('shares')) }}
          {% else %}
            -
          {% endif %}
        </td>
        <td>
          {% if decision.get('total_value') %}
            ${{ '%.2f'|format(decision.get('total_value')) }}
          {% elif decision.get('amount_usd') %}
            ${{ '%.2f'|format(decision.get('amount_usd')) }}
          {% else %}
            -
          {% endif %}
        </td>
        <td>{{ decision.get('reason', 'N/A') }}</td>
        <td>{{ trade.timestamp }}</td>
      </tr>
      {% endfor %}
    {% endfor %}
  </tbody>
</table>
{% endblock %}
