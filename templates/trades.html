{% extends "tabs.html" %}

{% block content %}
<h1>Latest Trade Decisions</h1>
<table>
    <thead>
        <tr>
            <th>Ticker</th>
            <th>Action</th>
            <th>Amount (USD)</th>
            <th>Reason</th>
            <th>Timestamp</th>
        </tr>
    </thead>
    <tbody>
        {% for trade in trades %}
            {% if trade.data and trade.data is iterable %}
                {% for decision in trade.data %}
                    {% if decision is mapping %}
                    <tr>
                        <td>{{ decision.get('ticker', 'N/A') }}</td>
                        <td>{{ decision.get('action', 'N/A') }}</td>
                        <td>${{ '%.2f'|format(decision.get('amount_usd', 0)) if decision.get('amount_usd') else 'N/A' }}</td>
                        <td>{{ decision.get('reason', 'N/A') }}</td>
                        <td>{{ trade.timestamp }}</td>
                    </tr>
                    {% endif %}
                {% endfor %}
            {% else %}
                <tr>
                    <td colspan="5">No trade data available</td>
                </tr>
            {% endif %}
        {% endfor %}
    </tbody>
</table>
{% endblock %}
